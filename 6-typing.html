<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>⌨️ 타이핑 게임</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        .game-container {
            background: white;
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 800px;
            width: 100%;
            position: relative;
        }

        .title {
            font-size: 3rem;
            margin-bottom: 30px;
            color: #333;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .typing-area {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            min-height: 200px;
        }

        .text-display {
            font-size: 1.5rem;
            line-height: 2;
            color: #333;
            margin-bottom: 20px;
            font-family: 'Courier New', monospace;
            text-align: left;
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #dee2e6;
            min-height: 120px;
        }

        .text-display .correct {
            color: #28a745;
            background: rgba(40, 167, 69, 0.1);
            padding: 2px 4px;
            border-radius: 3px;
        }

        .text-display .incorrect {
            color: #dc3545;
            background: rgba(220, 53, 69, 0.1);
            padding: 2px 4px;
            border-radius: 3px;
            text-decoration: underline;
        }

        .text-display .current {
            background: #007bff;
            color: white;
            padding: 2px 4px;
            border-radius: 3px;
            animation: blink 1s infinite;
        }

        .input-area {
            margin: 20px 0;
        }

        .typing-input {
            width: 100%;
            padding: 15px;
            font-size: 1.2rem;
            border: 3px solid #dee2e6;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            text-align: center;
            transition: all 0.3s ease;
        }

        .typing-input:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
        }

        .typing-input.correct {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.05);
        }

        .typing-input.incorrect {
            border-color: #dc3545;
            background: rgba(220, 53, 69, 0.05);
        }

        .game-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-item {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .timer-display {
            background: linear-gradient(145deg, #2c3e50, #34495e);
            color: #00ff88;
            font-family: 'Courier New', monospace;
            font-size: 3rem;
            font-weight: bold;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: inset 0 5px 15px rgba(0,0,0,0.3);
            border: 3px solid #1a252f;
            letter-spacing: 2px;
            text-shadow: 0 0 10px #00ff88;
        }

        .game-controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 15px 30px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .start-btn {
            background: linear-gradient(45deg, #00b894, #00a085);
            color: white;
        }

        .reset-btn {
            background: linear-gradient(45deg, #6c5ce7, #5f3dc4);
            color: white;
        }

        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .control-btn:active {
            transform: translateY(-1px);
        }

        .control-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .result {
            margin-top: 30px;
            padding: 25px;
            border-radius: 15px;
            font-size: 1.3rem;
            font-weight: bold;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.5;
        }

        .result.win {
            background: linear-gradient(45deg, #d4edda, #c3e6cb);
            color: #155724;
            border: 3px solid #c3e6cb;
            box-shadow: 0 5px 15px rgba(21, 87, 36, 0.2);
        }

        .result.lose {
            background: linear-gradient(45deg, #f8d7da, #f5c6cb);
            color: #721c24;
            border: 3px solid #f5c6cb;
            box-shadow: 0 5px 15px rgba(114, 28, 36, 0.2);
        }

        .result.neutral {
            background: linear-gradient(45deg, #fff3cd, #ffeaa7);
            color: #856404;
            border: 3px solid #ffeaa7;
            box-shadow: 0 5px 15px rgba(133, 100, 4, 0.2);
        }

        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            border: none;
            padding: 12px 24px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .back-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .instructions {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .instructions h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 1.3rem;
        }

        .instructions p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .coupon-code {
            background: #2c3e50;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            letter-spacing: 2px;
            margin: 10px 0;
            display: inline-block;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        .pulse {
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .jackpot-animation {
            animation: jackpot 0.8s ease-in-out infinite alternate;
        }

        @keyframes jackpot {
            from { 
                transform: scale(1);
                box-shadow: 0 5px 15px rgba(21, 87, 36, 0.2);
            }
            to { 
                transform: scale(1.05);
                box-shadow: 0 10px 30px rgba(21, 87, 36, 0.4);
            }
        }
    </style>
</head>
<body>
    <button class="back-btn" onclick="location.href='index.html'">← 홈으로</button>
    
    <div class="game-container">
        <h1 class="title">⌨️ 타이핑 게임</h1>
        
        <div class="instructions">
            <h3>🎯 게임 방법</h3>
            <p>1. 시작 버튼을 눌러 게임을 시작하세요</p>
            <p>2. 주어진 텍스트를 정확하고 빠르게 타이핑하세요</p>
            <p>3. 30초 동안 최대한 많이 타이핑하세요!</p>
            <p>4. 정확도와 속도가 점수에 반영됩니다</p>
        </div>

        <div class="timer-display" id="timerDisplay">30.00</div>

        <div class="typing-area">
            <div class="text-display" id="textDisplay">
                게임을 시작하려면 시작 버튼을 누르세요!
            </div>
            <div class="input-area">
                <input type="text" class="typing-input" id="typingInput" placeholder="여기에 타이핑하세요..." disabled>
            </div>
        </div>

        <div class="game-stats">
            <div class="stat-item">
                <div class="stat-value" id="wpm">0</div>
                <div class="stat-label">WPM</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="accuracy">0%</div>
                <div class="stat-label">정확도</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="charCount">0</div>
                <div class="stat-label">타이핑 수</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">점수</div>
            </div>
        </div>

        <div class="game-controls">
            <button class="control-btn start-btn" id="startBtn" onclick="startGame()">시작</button>
            <button class="control-btn reset-btn" id="resetBtn" onclick="resetGame()">리셋</button>
        </div>
        
        <div class="result" id="result">
            타이핑 게임을 시작하세요! ⌨️<br>
            <small>30초 동안 최대한 빠르고 정확하게 타이핑해보세요!</small>
        </div>
    </div>

    <script>
        const typingTexts = [
            "안녕하세요! 타이핑 게임에 오신 것을 환영합니다. 빠르고 정확한 타이핑을 연습해보세요.",
            "컴퓨터 프로그래밍은 창의적이고 논리적인 사고를 요구하는 흥미로운 분야입니다.",
            "인공지능과 머신러닝 기술이 발전하면서 우리의 일상생활이 크게 변화하고 있습니다.",
            "웹 개발은 HTML, CSS, JavaScript를 기반으로 사용자 친화적인 인터페이스를 만드는 기술입니다.",
            "데이터베이스는 정보를 체계적으로 저장하고 관리하는 시스템으로 현대 사회에서 필수적입니다.",
            "클라우드 컴퓨팅은 인터넷을 통해 컴퓨팅 리소스를 제공하는 혁신적인 기술입니다.",
            "사이버 보안은 디지털 환경에서 정보를 보호하고 안전을 지키는 중요한 분야입니다.",
            "모바일 앱 개발은 스마트폰과 태블릿을 위한 사용자 경험을 설계하는 창의적인 작업입니다."
        ];

        let currentText = '';
        let currentIndex = 0;
        let correctCount = 0;
        let totalCount = 0;
        let gameTime = 30;
        let isGameRunning = false;
        let gameInterval = null;
        let startTime = 0;

        function getRandomText() {
            return typingTexts[Math.floor(Math.random() * typingTexts.length)];
        }

        function startGame() {
            if (isGameRunning) return;
            
            isGameRunning = true;
            currentText = getRandomText();
            currentIndex = 0;
            correctCount = 0;
            totalCount = 0;
            gameTime = 30;
            startTime = Date.now();
            
            document.getElementById('startBtn').disabled = true;
            document.getElementById('resetBtn').disabled = true;
            document.getElementById('typingInput').disabled = false;
            document.getElementById('typingInput').focus();
            
            updateDisplay();
            startTimer();
            
            const result = document.getElementById('result');
            result.textContent = '게임이 시작되었습니다! 정확하고 빠르게 타이핑하세요!';
            result.className = 'result neutral';
        }

        function startTimer() {
            gameInterval = setInterval(() => {
                gameTime -= 0.01;
                
                if (gameTime <= 0) {
                    gameTime = 0;
                    document.getElementById('timerDisplay').textContent = '0.00';
                    endGame();
                    return;
                }
                
                document.getElementById('timerDisplay').textContent = gameTime.toFixed(2);
            }, 10);
        }

        function updateDisplay() {
            const display = document.getElementById('textDisplay');
            let html = '';
            
            for (let i = 0; i < currentText.length; i++) {
                if (i < currentIndex) {
                    if (i < correctCount) {
                        html += `<span class="correct">${currentText[i]}</span>`;
                    } else {
                        html += `<span class="incorrect">${currentText[i]}</span>`;
                    }
                } else if (i === currentIndex) {
                    html += `<span class="current">${currentText[i]}</span>`;
                } else {
                    html += currentText[i];
                }
            }
            
            display.innerHTML = html;
        }

        function handleInput() {
            if (!isGameRunning) return;
            
            const input = document.getElementById('typingInput');
            const inputValue = input.value;
            
            if (inputValue.length > currentIndex) {
                const char = inputValue[currentIndex];
                const correctChar = currentText[currentIndex];
                
                if (char === correctChar) {
                    correctCount++;
                    input.classList.remove('incorrect');
                    input.classList.add('correct');
                } else {
                    input.classList.remove('correct');
                    input.classList.add('incorrect');
                }
                
                currentIndex++;
                totalCount++;
                
                // 다음 문자로 이동
                if (currentIndex >= currentText.length) {
                    // 새로운 텍스트로 변경
                    currentText = getRandomText();
                    currentIndex = 0;
                    input.value = '';
                    input.classList.remove('correct', 'incorrect');
                }
                
                updateDisplay();
                updateStats();
            }
        }

        function updateStats() {
            const elapsed = (Date.now() - startTime) / 1000;
            const wpm = Math.floor((correctCount / 5) / (elapsed / 60));
            const accuracy = totalCount > 0 ? Math.floor((correctCount / totalCount) * 100) : 0;
            const score = Math.floor(wpm * accuracy / 10);
            
            document.getElementById('wpm').textContent = wpm;
            document.getElementById('accuracy').textContent = accuracy + '%';
            document.getElementById('charCount').textContent = correctCount;
            document.getElementById('score').textContent = score;
        }

        function endGame() {
            isGameRunning = false;
            clearInterval(gameInterval);
            
            document.getElementById('startBtn').disabled = false;
            document.getElementById('resetBtn').disabled = false;
            document.getElementById('typingInput').disabled = true;
            
            const elapsed = (Date.now() - startTime) / 1000;
            const wpm = Math.floor((correctCount / 5) / (elapsed / 60));
            const accuracy = totalCount > 0 ? Math.floor((correctCount / totalCount) * 100) : 0;
            const score = Math.floor(wpm * accuracy / 10);
            
            const result = document.getElementById('result');
            
            // 점수 30점 이상이면 모두 선물 지급
            if (score >= 30) {
                if (score >= 200) {
                    result.className = 'result win';
                    result.innerHTML = '🎉 대박! 50% 할인 쿠폰을 획득했습니다!';
                    showCoupon(50);
                    result.classList.add('jackpot-animation');
                } else if (score >= 150) {
                    result.className = 'result win';
                    result.innerHTML = '🎉 훌륭합니다! 30% 할인 쿠폰을 획득했습니다!';
                    showCoupon(30);
                } else if (score >= 100) {
                    result.className = 'result win';
                    result.innerHTML = '🎉 좋습니다! 20% 할인 쿠폰을 획득했습니다!';
                    showCoupon(20);
                } else if (score >= 60) {
                    result.className = 'result win';
                    result.innerHTML = '🎉 괜찮습니다! 15% 할인 쿠폰을 획득했습니다!';
                    showCoupon(15);
                } else {
                    result.className = 'result win';
                    result.innerHTML = '🎉 축하합니다! 10% 할인 쿠폰을 획득했습니다!';
                    showCoupon(10);
                }
            } else {
                result.className = 'result lose';
                result.innerHTML = '😢 아쉽게도 꽝입니다. 30점 이상을 달성해보세요!';
            }
            
            // 무제한 참여 가능
        }

        function resetGame() {
            isGameRunning = false;
            clearInterval(gameInterval);
            
            currentText = '';
            currentIndex = 0;
            correctCount = 0;
            totalCount = 0;
            gameTime = 30;
            
            document.getElementById('wpm').textContent = '0';
            document.getElementById('accuracy').textContent = '0%';
            document.getElementById('charCount').textContent = '0';
            document.getElementById('score').textContent = '0';
            document.getElementById('timerDisplay').textContent = '30.00';
            document.getElementById('textDisplay').textContent = '게임을 시작하려면 시작 버튼을 누르세요!';
            document.getElementById('typingInput').value = '';
            document.getElementById('typingInput').classList.remove('correct', 'incorrect');
            
            document.getElementById('startBtn').disabled = false;
            document.getElementById('resetBtn').disabled = false;
            document.getElementById('typingInput').disabled = true;
            
            const result = document.getElementById('result');
            result.textContent = '타이핑 게임을 시작하세요! ⌨️';
            result.className = 'result';
        }

        function showCoupon(discount) {
            // 쿠폰 코드 alert 표시
            setTimeout(() => {
                const couponCode = generateCouponCode();
                alert(`🎉 축하합니다!\n\n🎫 쿠폰 코드: ${couponCode}\n💳 할인율: ${discount}%`);
                
                // alert 확인 후 자동으로 새로고침 확인창 표시
                setTimeout(() => {
                    if (confirm('게임을 다시 시작하시겠습니까?\n페이지가 새로고침됩니다.')) {
                        location.reload();
                    }
                }, 500);
            }, 1000);
        }

        function generateCouponCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = '';
            for (let i = 0; i < 8; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        // 입력 이벤트 리스너
        document.getElementById('typingInput').addEventListener('input', handleInput);

        // 페이지 로드 시 초기화
        window.addEventListener('load', function() {
            // 무제한 참여 가능
        });

        // 키보드 지원
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                location.href = 'index.html';
            }
        });
    </script>
</body>
</html>
